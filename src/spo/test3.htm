<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>サイトからファイルリンクアクセス</title>

<style>

ul {
    list-style:none;
}

.utl_color_error {
    color:red;
}

.utl_color_info {
    color:blue;
}

.utl_display_none {
    display:none;
}


</style>

</head>
<body>

<main id="contents">

<article id="article_main">
    <h1>ファイル/フォルダへのアクセス</h1>
    
    <ul id="article_main_messages">
        <li></li>
    </ul>
    
</article>

<form name="form_main" action="" method="GET" target="_self">
</form>

<nav id="nav_main">
    <ul>
        <li><a id="file_path" href="" target="_blank">ここをクリックするとファイルパスにアクセスします</a></li>
    </ul>
</nav>

</main>

<script>

//https://qiita.com/EZ_Denta/items/e485207daaba68c52550#getname

(() => {
    window.addEventListener('load', (event) => {
        const url = new URL(window.location.href)
        const href = url.searchParams.get('path') || ''
        const message = href?
            '取得したファイルパス＝' + href :
            'ファイルパスの取得を失敗しました'
        
        const elm_form = document.querySelector('form[name="form_main"]')
        elm_form.action = href
        
        const elm_message = document.querySelector('#article_main_messages>li:first-child')
        elm_message.textContent = message
        
        const elm_anchor = document.querySelector('#file_path')
        elm_anchor.href = href
        
        if (href) {
            //elm_message.classList.add('utl_color_info')
        } else {
            elm_message.classList.add('utl_color_error')
            elm_anchor.classList.add('utl_display_none')
        }
        
        
        //console.log("BBBBBBB")
        console.log(url)
        console.log(href)
        console.log(message)
        
    },false)
})()

</script>

</body>
</html>
