<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>サイトからファイルリンクアクセス</title>

<style>

ul {
    list-style:none;
}

.utl_color_error {
    color:red;
}

.utl_color_info {
    color:blue;
}

.utl_display_none {
    display:none;
}


</style>

</head>
<body>

<main id="contents">

<article id="article_main">
    <h1>ファイル/フォルダへのアクセス</h1>
    
    <ul id="article_main_messages">
        <li></li>
    </ul>
    
</article>

<nav id="nav_main">
    <ul>
        <li><a id="file_path" href="" target="_blank">ここをクリックするとファイルパスにアクセスします</a></li>
    </ul>
</nav>

<form name="form_main" action="" method="GET" target="_blank">
</form>

<iframe name="iframe_main" src="" sandbox="allow-downloads allow-same-origin">
</iframe>

</main>

<script>

//https://qiita.com/EZ_Denta/items/e485207daaba68c52550#getname

(function() => {
    window.addEventListener('load', (event) => {
        const url = new URL(window.location.href)
        
        const original_href = url.searchParams.get('path') || ''
        
//仮処置
        //const href = 'file:///' + original_href.replaceAll('\\', '/')
        const href = 'https://duckduckgo.com/'
        //const href = 'http://localhost:8080/test2.htm'
        
        
        
        const message = href?
            '取得したファイルパス＝' + original_href :
            'ファイルパスの取得を失敗しました'
        
        const elm_form = document.querySelector('form[name="form_main"]')
        elm_form.action = href
        
        const elm_message = document.querySelector(
            '#article_main_messages>li:first-child'
            )
        elm_message.textContent = message
        
        const elm_anchor = document.querySelector('#file_path')
        elm_anchor.href = href
        
        if (original_href) {
            //elm_message.classList.add('utl_color_info')
        } else {
            elm_message.classList.add('utl_color_error')
            elm_anchor.classList.add('utl_display_none')
        }
        
        
        const elm_iframe = document.querySelector('iframe[name="iframe_main"]')
        elm_iframe.src = href
        
        
        
        
//仮処置
        //document.form_main.submit()
        
        
        //const elm_child_window = window.open(
            //href,
            //'fileOpenerWindow',
            //[
                //'left=100',
                //'top=100',
                //'width=100',
                //'height=100',
            //].join(',')
        //)
        
        
        //console.log(elm_child_window)
        
        
        //window.setTimeout(
            //() => elm_child_window.close(),
            //3000
            //)
        
        
        
    },false)
})()

</script>

</body>
</html>
